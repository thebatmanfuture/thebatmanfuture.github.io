#### 你对免杀是怎么理解的，免杀分为哪几种？

.

~~~
静态
	源码
	二进制
动态
	反虚拟机，反沙盒，反调试
	敏感行为：修改注册表，创建互斥体，添加用户，远程桌面等
~~~

源码：最常用的，过360什么的还是可以，但是权限一般不持久

~~~
对硬编码进行免杀，常用的就是分离(隐写马，命令行分离)，白加黑
如果是钓鱼，建议用白加黑 或者 分离
如果是渗透建议直接用powershell分离后通过命令行上线运行
~~~

二进制：

~~~
就是加壳：压缩壳和加密壳，例如加密壳
可以对一个可执行文件中从pe角度看，对其代码段和数据段加密，比如生成了一个密钥，这个密钥对代码段和数据段的每一位进行了加密，比如异或算法
修改PE头信息，比如程序入口之类的，另外就是添加节(.sedata)，添加一个壳段
~~~

反虚拟机：

~~~
可以通过
1)硬件信息：虚拟机一般配置低，CPU少，硬盘，内存，计算机名，临时文件数等
2)检测进程名：
Vmware：
Vmtoolsd.exe
Vmwaretrat.exe
Vmwareuser.exe
Vmacthlp.exe
VirtualBox：
vboxservice.exe
vboxtray.exe

3)检测文件名：xxx虚拟机

4)注册表

5)服务

6)检测mac地址前缀
~~~

反沙盒

~~~
1.延迟运行
2.检测开机时间
3.检测物理信息：内存，CPU数量
4.检测临时文件数
~~~

反调试：

~~~
当Ring3程序需要执行Ring0指令时，一般有以下几种方法：

使用驱动程序：通过编写一个Ring0的驱动程序，提供Ring0指令的执行服务。Ring3程序可以通过与驱动程序进行通信的方式，将需要执行的Ring0指令传递给驱动程序，并由驱动程序代为执行。

使用系统调用：在Windows系统中，Ring3程序可以通过调用 DeviceIoControl 系统调用，向驱动程序发送请求，用于执行Ring0指令。驱动程序可以拦截对应的Ring0指令，并根据自己的实现方式进行处理。

利用已知的漏洞：通过利用系统已知的漏洞，例如堆溢出、栈溢出等，可以实现将Ring3进程的代码注入到Ring0的内核空间中，并在Ring0执行Ring3程序的代码。
~~~







#### cobalt strike二开

~~~
改变那个checksum8算法得到的92，93
改变证书
增加CDN节点
OSS存储-大厂图床
~~~













